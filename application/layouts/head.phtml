<?php //echo '<pre>';var_dump(Common::getSession()->user);echo '</pre>'; ?>
<head>
    <?php echo $this->headTitle(); ?>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link href="<?php echo $this->baseUrl('favicon.ico'); ?>" rel="shortcut icon" />
<?php echo $this->minifyHeadLink()
    //->appendStylesheet('tooltip.css')
    //->appendStylesheet('bootstrap.css')
    ->appendStylesheet('jquery.qtip.css')
    ->appendStylesheet('ui-lightness/jquery-ui-1.9.2.custom.css')
    //->appendStylesheet('jquery.selectBoxIt.css')
    ->appendStylesheet('prettyCheckable.css');
?>

<?php $this->minifyHeadScript()
    ->prependFile('jquery-ui-1.8.23.custom.min.js')
    ->prependFile('jquery-1.8.3.min.js')
    ->appendFile('jquery.tmpl.min.js')
    ->appendFile('jquery.qtip.min.js')
    ->appendFile('jquery.watermark.js')
    ->appendFile('prettyCheckable.js')
    ->appendFile('jquery.dotdotdot-1.5.3.js')
    ->appendFile('jQueryRotate.2.2.js')
    ->appendFile('jquery.validate.js')
    ->appendFile('jquery.address-1.5.min.js');
    //->appendFile('jquery.selectBoxIt.js');

    if (Zend_Registry::get('config_ini')->server->online==1){
        echo $this->minifyHeadScript();
    }else{
        echo $this->minifyHeadScript();
    }
?>
            
    <link href="<?php echo $this->baseUrl('css/main.less')?>" rel="stylesheet/less" type="text/css" media="all">
    <script type="text/javascript" src="<?php echo $this->baseUrl('js/less-1.3.0.min.js')?>"> </script>
<!-- Internet Explorer HTML5 enabling code: -->
<!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1%28beta4%29/ie7-squish.js"></script>

        <link href="<?php echo $this->baseUrl('css/ie.css')?>" rel="stylesheet" type="text/css" media="all">
        <style type="text/css">
        .clear {
          zoom: 1;
          display: block;
        }
        </style>
    <![endif]-->
    
<?php if (Zend_Registry::get('config_ini')->server->online==1){ ?>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places&amp;region=hk&amp;language=<?php echo Common::getSiteDisplayLang();?>" type="text/javascript"></script>
<?php } ?>
<!-- qtip box -->
<script type="text/javascript">
   jQuery(function($){
        <?php if (APPLICATION_ENV == 'production'){
            ?>
            // hack for disabling console.log... 
                console = console || {};
                console.log = function(){};
            <?php 
            }
        ?>
        $.fn.qtip.defaults = $.extend(true, {}, $.fn.qtip.defaults, {
            overwrite: true,
            content: {
                text: true,
                attr: '<img class="throbber" src="<?php echo $this->baseUrl('images/throbber.gif')?>" alt="Loading..." />',
                ajax: {
                    type: 'POST',
                    dataType: 'json',
                    //url: $(this).attr('rel'),
                    once: false,
                    loading: false,
                    error:function(){
                        alert( jqXHR.responseText);
                    }
                },
                title: {
                    button: true
                }
            },
            events: {
                visible: function(event, api) {
                    // Grab the tooltip element from the API
                    var tooltip = api.elements.tooltip
                    // ...and here's the extra event binds
                    tooltip.bind('tooltipshow', function(event, api) {
                        $.watermark.showAll();
                    })
                    
                }
            },
            show: {
                event: 'click',
                solo: true, // Only show one tooltip at a time
                delay: 0,
                effect: false
            },
            hide: {
                event: 'unfocus'
            }
            <?php /*
            ,position: {
                at: 'bottom center', 
                my: 'top left',
                viewport: $(window), // Keep the tooltip on-screen at all times
                //effect: false // Disable positioning animation
            }, 
            ,style: {
                def:false,
                //classes: 'qtip-wiki qtip-light qtip-shadow'
                classes: 'ui-tooltip-green ui-tooltip-shadow'
            }*/ ?>
        })
        
        $.watermark.options = {
          className: 'watermark'
        };
         
        $('input.pretty_checkable').prettyCheckable({
            color: 'red'
        });
        $('.prettycheckbox').disableSelection();
          
        /*
         * not sure why it's not working
         $.datepicker.setDefaults({
           dateFormat: 'yy-mm-dd'
        });*/
       
        $('body').on('click', '[data-hasqtip]' , function(ev) {
            ev.preventDefault();
        });
       
    });

</script>
</head>